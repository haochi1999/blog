# 变量对象

对于每个执行上下文都有三个重要属性: 

+ 变量对象
+ 作用域链
+ this

变量对象是与执行上下文相关的数据作用域,存储了在上下文中定义的变量和函数声明

**同一作用域下,函数提升比变量提升更靠前**

## 全局上下文

全局对象是作用域的头,这意味着顶层的js代码声明的所有变量都将成为全局对象的属性

1. 全局对象可以通过this引用,在客户端js中,全局对象就是window对象
2. 全局对象是由Object构造函数实例化的一个对象

```javascript
console.log(this instanceof Object); // true
```

### 全局上下文的变量对象就是全局对象

## 函数上下文

在函数上下文中,我们用活动对象(activation object, AO)来表示变量对象

活动对象和变量对象其实是一个东西,只是变量对象是规范上的或者说是引擎实现上的,不可在js环境访问,只有当进入一个执行上下文中,这个执行上下文的变量对象才会被激活,所以才叫AO,只有被激活的变量对象,也就是活动对象上的各种属性才能被访问

活动对象是在进入函数上下文时刻被创建的,它通过函数的arguments属性初始化,arguments属性值是Arguments对象

## 执行过程

### 进入执行上下文

变量对象会包括: 

1. 函数的所有形参(如果是函数上下文)

    + 由名称和对应值组成一个变量对象的属性被创建
    + 没有实参,属性值设置为undefined

2. 函数声明

    + 由名称和对应值(函数对象)组成一个变量对象的属性被创建
    + 如果变量对象已经存在同名称的属性,则完全替换这个属性

3. 变量声明

    + 由名称和对应值(undefined)组成一个变量对象的属性被创建
    + 如果变量名称和以及声明的形参或函数相同,则变量声明不会干扰已经存在的这类属性

### 代码执行

在代码执行阶段,会顺序执行代码,根据代码修改变量对象的值

### 总结

1. 全局上下文的变量对象初始化是全局对象
2. 函数上下文的变量对象初始化只包括Arguments对象
3. 在进入执行上下文时会给变量对象添加形参,函数声明,变量声明等初始的属性值
4. 在代码执行阶段会再次修改变量对象的属性值

## 变量对象(VO)活动对象(AO)的关系

在没有进入执行阶段之前,VO中的都不能被访问,但是在执行阶段后,VO转变为AO,里面的属性都能被访问了,然后开始进行执行阶段的操作

AO = VO + function paramenters + arguments


