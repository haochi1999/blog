# Node的异步I/O

## 事件循环

在进程启动Node便会创建一个类似于while(true)的循环,每执行一次循环体的过程我们成为Tick

每个Tick的过程就是查看是否有事件待处理,如果有就取出事件及相关回调函数,如果存在关联的回调函数,就执行它们,然后进入下个循环,如果不再有事件处理,就退出流程

## 观察者

在每个Tick过程判断是否有事件需要处理,每个事件循环有一个或者多个观察者,判断是否有事件需要处理就是向这些观察者询问是都有要处理的事件

浏览器采用了类似的机制,事件可能来自用户的点击或者加载某些文件产生,在Node中,事件主要来源于网络请求、文件I/O等,这些事件对应的观察者有文件I/O观察者、网络I/O观察者等,观察者对事件进行了分类

**事件循环是一个典型的生产者/消费者模型**

在windows下,这个循环基于IOCP创建

## 请求对象

从js调用Node核心模块,核心模块调用C++内建模块,内建模块通过libuv进行系统调用,这是Node里经典的调用方式

请求对象是异步I/O过程的重要中间产物,所有的状态都保存在这个对象中,包括送入线程池等待执行以及操作完毕后的回调处理

## 执行回调

组装好请求对象、送入I/O线程池等待执行,实际上完成了异步I/O的第一部分,回调通知是第二部分

## 非I/O的异步API

setTimeout()、setInterval()、setImmediate()、process.nextTick()

# 异步编程

## 高阶函数

高阶函数是可以把函数作为参数,或是将函数作为返回值的函数 

## 偏函数用法

创建一个调用另外一个部分,参数或变量已经预置的函数










