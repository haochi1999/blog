# 栈

## 概念

+ 后进者先出,先进者后出,这就是典型的栈结构
+ 从栈的操作特性来看,是一种"操作受限"的线性表,只允许在端插入和删除数据
+ 用数组实现的叫作顺序栈,链表实现的叫链式栈

## 使用场景

+ 当某个数据集合只涉及在一端插入或者删除数据,并且满足后进先出,先进后出的特性

## 思考

+ 内存中的堆栈和数据结构是不是一个概念?

    内存中的堆栈是真实存在的物理区(虚拟内存空间|物理内存的映射),数据结构中的堆栈是抽象的数据存储结构

    详解: 

        1. 内存管理和数据结构上都有堆栈这两个概念
        2. 内存管理上的堆栈强调的是数据的生命周期,数据结构上的堆栈强调的是数据的组织
        3. 内存管理上的栈符合数据结构栈的特点,即LIFO,两者同名可以接受
        4. 数据结构上的堆定义: 它是一种数组对象,可以视为一颗完全二叉树结构;应用场景包括堆排序,优先队列等,和内存管理的堆定义不同

+ 为什么函数调用"栈"来保存变量?用其他数据结构行吗?

    不一定非要用栈来保存临时变量,只不过函数调用符合后进先出的特性,用栈来实现,是最顺理成章的

    从调用函数进入被调用函数,对于数据来说变化的是作用域,所以根本上保证每进入一个新的函数,都是一个新的作用域就可以,用栈实现非常方便,在进入被调用函数的时候,分配一段栈空间给这个函数的变量,函数结束时,将栈顶复位,正好回到调用函数的作用域内


# 队列

## 概念

+ 先进者先出,这就是典型的队列结构
+ 支持两个操作: 入列(enqueue)放一个数据到队尾,出队(dequeue)从队头取一个元素
+ 和栈一样,队列也是一种操作受限的线性表
+ 数组实现(顺序队列),链表实现(链式队列),循环队列(基于数组)

## 常见应用

1. 阻塞队列
   
   + 在队列的基础上增加阻塞操作
   + 在队列为空的时候,从队头取数据会被阻塞,因为还没有数据可取,直到队列中有了数据才会返回;如果队列满了,插入数据的操作会被阻塞,直到队列中有空位再插入数据,然后再返回
   + "消费者-生产者模型": 可以有效地协调生产与消费的速度,当生产数据过快,消费者来不及消费时,存储队列很快就会满,生产者就会阻塞等待,直到消费者消费了数据,生产才会继续唤醒,基于阻塞队列,我们可以协调消费者和生产者的个数来提高数据处理的效率,比如多配置几个消费者,来应对一个生产者

2. 并发队列

    + 多线程情况下,会有多个线程同时操作队列,这时就会存在线程安全问题,能够有效解决线程安全问题的队列就成为并发队列
    + 并发队列的简单实现就是在enqueue和dequeue方法上加锁,但是锁力度大并发度会比较低,同一时刻只允许一个存或取的操作
    + 实际上,基于数组的循环队列利用CAS原子操作,可以实现非常高效的并发队列,这也是循环队列比链式队列应用更加的广泛的原因

3. 线程池资源枯竭时的处理

    当资源有限的场景,没有空闲资源时,基本可以通过队列这种数据结构来实现请求排队




